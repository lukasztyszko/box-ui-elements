"use strict";(globalThis.webpackChunkbox_ui_elements=globalThis.webpackChunkbox_ui_elements||[]).push([[1660],{"./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/@storybook/addon-styling/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[3]!./src/features/shared-link-modal/EmailSharedLink.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".email-shared-link .bdl-PillSelectorDropdown{margin:0}.email-shared-link .text-area-container{display:block;height:0;margin:0;overflow:hidden}.email-shared-link .text-area-container{transition:height .2s}.email-shared-link .bdl-PillSelector,.email-shared-link textarea{width:100%}.email-shared-link.is-expanded .bdl-PillSelectorDropdown{margin-bottom:20px}.email-shared-link.is-expanded .text-area-container{height:100px}.email-shared-link.is-expanded .bdl-PillSelector{height:58px}","",{version:3,sources:["webpack://./src/features/shared-link-modal/EmailSharedLink.scss"],names:[],mappings:"AACI,6CACI,QAAA,CAGJ,wCACI,aAAA,CACA,QAAA,CACA,QAAA,CACA,eAAA,CAGJ,wCACI,qBAAA,CAGJ,iEAEI,UAAA,CAIA,yDACI,kBAAA,CAGJ,oDACI,YAAA,CAGJ,iDACI,WAAA",sourcesContent:[".email-shared-link {\n    .bdl-PillSelectorDropdown {\n        margin: 0;\n    }\n\n    .text-area-container {\n        display: block;\n        height: 0;\n        margin: 0;\n        overflow: hidden;\n    }\n\n    .text-area-container {\n        transition: height .2s;\n    }\n\n    .bdl-PillSelector,\n    textarea {\n        width: 100%;\n    }\n\n    &.is-expanded {\n        .bdl-PillSelectorDropdown {\n            margin-bottom: 20px;\n        }\n\n        .text-area-container {\n            height: 100px;\n        }\n\n        .bdl-PillSelector {\n            height: 58px;\n        }\n    }\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/features/shared-link-modal/stories/SharedLinkModal.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,basic:()=>basic,default:()=>SharedLinkModal_stories});var react=__webpack_require__("./node_modules/react/index.js"),provider=__webpack_require__("./node_modules/react-intl/lib/src/components/provider.js"),dist=__webpack_require__("./node_modules/@sambego/storybook-state/dist/index.js"),addon_knobs_dist=__webpack_require__("./node_modules/@storybook/addon-knobs/dist/index.js"),Button=__webpack_require__("./src/components/button/Button.tsx"),message=__webpack_require__("./node_modules/react-intl/lib/src/components/message.js"),components_button=__webpack_require__("./src/components/button/index.ts"),modal=__webpack_require__("./src/components/modal/index.js"),messages=__webpack_require__("./src/common/messages.js"),SharedLink=__webpack_require__("./src/features/shared-link-modal/SharedLink.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectIntl=__webpack_require__("./node_modules/react-intl/lib/src/components/injectIntl.js"),pill_selector_dropdown=__webpack_require__("./src/components/pill-selector-dropdown/index.js"),contact_datalist_item=__webpack_require__("./src/components/contact-datalist-item/index.ts"),text_area=__webpack_require__("./src/components/text-area/index.js"),primary_button=__webpack_require__("./src/components/primary-button/index.ts"),parseEmails=__webpack_require__("./src/utils/parseEmails.js"),shared_link_modal_messages=__webpack_require__("./src/features/shared-link-modal/messages.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),EmailSharedLink=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/@storybook/addon-styling/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[3]!./src/features/shared-link-modal/EmailSharedLink.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(EmailSharedLink.Z,options);EmailSharedLink.Z&&EmailSharedLink.Z.locals&&EmailSharedLink.Z.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class EmailSharedLink_EmailSharedLink extends react.Component{constructor(props){super(props),_defineProperty(this,"getSelectorOptions",(()=>{const{contacts}=this.props,{pillSelectorInputValue,selectedOptions}=this.state;return""!==pillSelectorInputValue?contacts.filter((_ref=>{let{email,id}=_ref;return!selectedOptions.find((_ref2=>{let{value}=_ref2;return value===email||value===id}))})).map((_ref3=>{let{email,id,name,type}=_ref3;return{email,id,text:name,type,value:email||id}})):[]})),_defineProperty(this,"handlePillSelectorInput",(value=>{const{getContacts}=this.props,trimmedValue=value.trim();getContacts(trimmedValue),this.setState({pillSelectorError:"",pillSelectorInputValue:trimmedValue})})),_defineProperty(this,"handlePillSelect",(pills=>{this.setState({selectedOptions:[...this.state.selectedOptions,...pills]})})),_defineProperty(this,"handlePillRemove",((option,index)=>{const selectedOptions=this.state.selectedOptions.slice();selectedOptions.splice(index,1),this.setState({selectedOptions})})),_defineProperty(this,"validateForError",(text=>{const{intl:{formatMessage}}=this.props;let pillSelectorError="";text&&!this.validator(text)&&(pillSelectorError=formatMessage(messages.Z.invalidEmailError)),this.setState({pillSelectorError})})),_defineProperty(this,"validator",(text=>/^[^\s<>@,]+@[^\s<>@,/\\]+\.[^\s<>@,]+$/i.test(text))),_defineProperty(this,"sendEmail",(event=>{event.preventDefault();const{intl:{formatMessage},sendEmail}=this.props,{selectedOptions,emailMessage,pillSelectorError}=this.state;""===pillSelectorError&&(0!==selectedOptions.length?sendEmail({emails:selectedOptions.map((_ref4=>{let{value}=_ref4;return value})),emailMessage}):this.setState({pillSelectorError:formatMessage(shared_link_modal_messages.Z.enterAtLeastOneEmailError)}))})),_defineProperty(this,"handleMessageChange",(event=>{this.setState({emailMessage:event.target.value})}));const{defaultEmailMessage}=props;this.state={pillSelectorError:"",pillSelectorInputValue:"",emailMessage:defaultEmailMessage||"",selectedOptions:[]}}render(){const{pillSelectorError,selectedOptions,emailMessage}=this.state,{emailMessageProps,intl:{formatMessage},isExpanded,onExpand,onRequestClose,submitting}=this.props,selectorOptions=this.getSelectorOptions();return(0,jsx_runtime.jsxs)("form",{onSubmit:this.sendEmail,className:classnames_default()("email-shared-link",{"is-expanded":isExpanded}),children:[(0,jsx_runtime.jsx)(pill_selector_dropdown.ZP,{allowCustomPills:!0,error:pillSelectorError,label:(0,jsx_runtime.jsx)(message.Z,_objectSpread({},shared_link_modal_messages.Z.emailSharedLink)),inputProps:_objectSpread({onFocus:onExpand},emailMessageProps),onInput:this.handlePillSelectorInput,onRemove:this.handlePillRemove,onSelect:this.handlePillSelect,parseItems:parseEmails.Z,placeholder:formatMessage(messages.Z.pillSelectorPlaceholder),selectedOptions,selectorOptions,validateForError:this.validateForError,validator:this.validator,children:selectorOptions.map((_ref5=>{let{email,text,value}=_ref5;return(0,jsx_runtime.jsx)(contact_datalist_item.Z,{name:text,subtitle:email},value)}))}),(0,jsx_runtime.jsx)(text_area.Z,{isRequired:!0,label:(0,jsx_runtime.jsx)(message.Z,_objectSpread({},shared_link_modal_messages.Z.messageTitle)),onChange:this.handleMessageChange,rows:3,value:emailMessage}),isExpanded&&(0,jsx_runtime.jsxs)(modal.nK,{children:[(0,jsx_runtime.jsx)(components_button.Z,{isDisabled:submitting,onClick:onRequestClose,type:"button",children:(0,jsx_runtime.jsx)(message.Z,_objectSpread({},messages.Z.cancel))}),(0,jsx_runtime.jsx)(primary_button.Z,{isDisabled:submitting,isLoading:submitting,type:"submit",children:(0,jsx_runtime.jsx)(message.Z,_objectSpread({},messages.Z.send))})]})]})}}EmailSharedLink_EmailSharedLink.displayName="EmailSharedLink",_defineProperty(EmailSharedLink_EmailSharedLink,"propTypes",{contacts:prop_types_default().arrayOf(prop_types_default().shape({email:prop_types_default().string,id:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]).isrequired,name:prop_types_default().string.isRequired,type:prop_types_default().string.isRequired})).isRequired,defaultEmailMessage:prop_types_default().string,emailMessageProps:prop_types_default().object,intl:prop_types_default().any,getContacts:prop_types_default().func.isRequired,isExpanded:prop_types_default().bool,onExpand:prop_types_default().func.isRequired,onRequestClose:prop_types_default().func.isRequired,sendEmail:prop_types_default().func.isRequired,submitting:prop_types_default().bool}),_defineProperty(EmailSharedLink_EmailSharedLink,"defaultProps",{emailMessageProps:{}}),EmailSharedLink_EmailSharedLink.__docgenInfo={description:"",methods:[{name:"getSelectorOptions",docblock:null,modifiers:[],params:[],returns:null},{name:"handlePillSelectorInput",docblock:null,modifiers:[],params:[{name:"value",type:null}],returns:null},{name:"handlePillSelect",docblock:null,modifiers:[],params:[{name:"pills",type:null}],returns:null},{name:"handlePillRemove",docblock:null,modifiers:[],params:[{name:"option",type:null},{name:"index",type:null}],returns:null},{name:"validateForError",docblock:null,modifiers:[],params:[{name:"text",type:null}],returns:null},{name:"validator",docblock:null,modifiers:[],params:[{name:"text",type:null}],returns:null},{name:"sendEmail",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleMessageChange",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null}],displayName:"EmailSharedLink",props:{emailMessageProps:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},contacts:{type:{name:"arrayOf",value:{name:"shape",value:{email:{name:"string",required:!1},id:{name:"union",value:[{name:"number"},{name:"string"}],required:!1},name:{name:"string",required:!0},type:{name:"string",required:!0}}}},required:!0,description:""},defaultEmailMessage:{type:{name:"string"},required:!1,description:""},intl:{type:{name:"any"},required:!1,description:""},getContacts:{type:{name:"func"},required:!0,description:""},isExpanded:{type:{name:"bool"},required:!1,description:""},onExpand:{type:{name:"func"},required:!0,description:""},onRequestClose:{type:{name:"func"},required:!0,description:""},sendEmail:{type:{name:"func"},required:!0,description:""},submitting:{type:{name:"bool"},required:!1,description:""}}};const features_shared_link_modal_EmailSharedLink=(0,injectIntl.ZP)(EmailSharedLink_EmailSharedLink);__webpack_require__("./src/features/shared-link-modal/propTypes.js");function SharedLinkModal_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SharedLinkModal_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SharedLinkModal_ownKeys(Object(t),!0).forEach((function(r){SharedLinkModal_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SharedLinkModal_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SharedLinkModal_defineProperty(obj,key,value){return(key=function SharedLinkModal_toPropertyKey(t){var i=function SharedLinkModal_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class SharedLinkModal extends react.Component{constructor(){super(...arguments),SharedLinkModal_defineProperty(this,"state",{isEmailSharedLinkExpanded:!1}),SharedLinkModal_defineProperty(this,"handleEmailSharedLinkExpand",(()=>{this.setState({isEmailSharedLinkExpanded:!0})}))}renderSharedLink(){const{accessLevel,accessMenuButtonProps,allowedAccessLevels,canRemoveLink,changeAccessLevel,changePermissionLevel,copyButtonProps,enterpriseName,expiration,isDownloadAllowed,isEditAllowed,isPreviewAllowed,itemType,onCopySuccess,onSettingsClick,permissionLevel,removeLink,removeLinkButtonProps,sharedLink,submitting}=this.props;return(0,jsx_runtime.jsx)(SharedLink.Z,{accessLevel,accessMenuButtonProps,allowedAccessLevels,canRemoveLink,changeAccessLevel,changePermissionLevel,copyButtonProps,enterpriseName,expiration,isDownloadAllowed,isEditAllowed,isPreviewAllowed,itemType,onCopySuccess,onSettingsClick,permissionLevel,removeLink,removeLinkButtonProps,sharedLink,submitting})}renderEmailSharedLink(){const{contacts,defaultEmailMessage,emailMessageProps,getContacts,onRequestClose,sendEmail,submitting}=this.props;return getContacts&&contacts&&sendEmail?(0,jsx_runtime.jsx)(features_shared_link_modal_EmailSharedLink,{contacts,defaultEmailMessage,emailMessageProps,getContacts,isExpanded:this.state.isEmailSharedLinkExpanded,sendEmail,onRequestClose,submitting,onExpand:this.handleEmailSharedLinkExpand}):null}render(){const{isOpen,itemName,modalProps,onRequestClose,submitting}=this.props,{isEmailSharedLinkExpanded}=this.state;return(0,jsx_runtime.jsxs)(modal.u_,SharedLinkModal_objectSpread({className:"shared-link-modal",focusElementSelector:".shared-link-container input",isOpen,onRequestClose:submitting?void 0:onRequestClose,title:(0,jsx_runtime.jsx)(message.Z,SharedLinkModal_objectSpread({},shared_link_modal_messages.Z.sharedLinkModalTitle,{values:{itemName}}))},modalProps,{children:[this.renderSharedLink(),(0,jsx_runtime.jsx)("hr",{}),this.renderEmailSharedLink(),!isEmailSharedLinkExpanded&&(0,jsx_runtime.jsx)(modal.nK,{children:(0,jsx_runtime.jsx)(components_button.Z,{isDisabled:submitting,onClick:onRequestClose,type:"button",children:(0,jsx_runtime.jsx)(message.Z,SharedLinkModal_objectSpread({},messages.Z.close))})})]}))}}SharedLinkModal.displayName="SharedLinkModal",SharedLinkModal.__docgenInfo={description:"",methods:[{name:"handleEmailSharedLinkExpand",docblock:null,modifiers:[],params:[],returns:null},{name:"renderSharedLink",docblock:null,modifiers:[],params:[],returns:null},{name:"renderEmailSharedLink",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SharedLinkModal",props:{accessLevel:{required:!1,flowType:{name:"accessLevelPropType"},description:"Current access level for this item; one of 'peopleWithTheLink' | 'peopleInYourCompany' | 'peopleInThisItem'"},accessMenuButtonProps:{required:!1,flowType:{name:"Object"},description:""},allowedAccessLevels:{required:!1,flowType:{name:"allowedAccessLevelsPropType"},description:"The selectable access levels. Should be an object { peopleWithTheLink: true/false, peopleInYourCompany: true/false, peopleInThisItem: true/false }"},canRemoveLink:{required:!1,flowType:{name:"boolean"},description:"Determines whether or not user is allowed to remove shared link"},changeAccessLevel:{required:!0,flowType:{name:"Function"},description:"Function that changes access level; (newAccessLevel: 'peopleWithTheLink' | 'peopleInYourCompany' | 'peopleInThisItem') => void"},changePermissionLevel:{required:!1,flowType:{name:"Function"},description:"Function that changes permission level; (newPermissionLevel: 'canView' | 'canEdit') => void. If not provided, then the permission menu won't show up."},contacts:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n    email?: string,\n    id: number | string,\n    name: string,\n    type: string,\n}",signature:{properties:[{key:"email",value:{name:"string",required:!1}},{key:"id",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"type",value:{name:"string",required:!0}}]}}],raw:"Array<{\n    email?: string,\n    id: number | string,\n    name: string,\n    type: string,\n}>"},description:'An array of contacts for the pill selector dropdown. If not provided, "Email Shared Link" section will not appear.'},copyButtonProps:{required:!1,flowType:{name:"Object"},description:""},defaultEmailMessage:{required:!1,flowType:{name:"string"},description:'Default "send shared link" email message'},emailMessageProps:{required:!1,flowType:{name:"Object"},description:""},enterpriseName:{required:!1,flowType:{name:"string"},description:""},expiration:{required:!1,flowType:{name:"number"},description:"Timestamp for shared link expiration date. If not provided, expiration icon will not be shown."},getContacts:{required:!1,flowType:{name:"Function"},description:'Handler function whenever the user types to fetch contacts. If not provided, "Email Shared Link" section will not appear.'},isDownloadAllowed:{required:!1,flowType:{name:"boolean"},description:""},isEditAllowed:{required:!1,flowType:{name:"boolean"},description:""},isOpen:{required:!1,flowType:{name:"boolean"},description:""},isPreviewAllowed:{required:!1,flowType:{name:"boolean"},description:""},itemName:{required:!0,flowType:{name:"string"},description:""},itemType:{required:!0,flowType:{name:"union",raw:"'folder' | 'file' | 'weblink'",elements:[{name:"literal",value:"'folder'"},{name:"literal",value:"'file'"},{name:"literal",value:"'weblink'"}]},description:""},modalProps:{required:!1,flowType:{name:"Object"},description:""},onCopySuccess:{required:!1,flowType:{name:"Function"},description:""},onRequestClose:{required:!0,flowType:{name:"Function"},description:""},onSettingsClick:{required:!1,flowType:{name:"Function"},description:"Handler for clicks on the settings icon. If not provided, the settings icon won't be rendered."},permissionLevel:{required:!1,flowType:{name:"permissionLevelPropType"},description:"Current permission level for this item; one of 'canView' | 'canEdit'. If not provided, then the permission menu won't show up."},removeLink:{required:!0,flowType:{name:"Function"},description:"Function that removes the shared link; () => void"},removeLinkButtonProps:{required:!1,flowType:{name:"Object"},description:""},sendEmail:{required:!1,flowType:{name:"Function"},description:'Function to send the shared link to the entered emails. Calls function with an object in the format { emails: Array<string>, emailMessage: string }.\n If not provided, "Email Shared Link" section will not appear.'},sharedLink:{required:!0,flowType:{name:"string"},description:"Share URL of the item"},submitting:{required:!1,flowType:{name:"boolean"},description:"Whether or not a request is in progress"}}};const shared_link_modal_SharedLinkModal=SharedLinkModal;var _basic$parameters,_basic$parameters2,_basic$parameters2$do;function SharedLinkModal_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SharedLinkModal_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SharedLinkModal_stories_ownKeys(Object(t),!0).forEach((function(r){SharedLinkModal_stories_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SharedLinkModal_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SharedLinkModal_stories_defineProperty(obj,key,value){return(key=function SharedLinkModal_stories_toPropertyKey(t){var i=function SharedLinkModal_stories_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const basic=()=>{const contacts=[{id:0,name:"Jackie",email:"j@example.com",type:"user"},{id:1,name:"Jeff",email:"jt@example.com",type:"user"},{id:2,name:"David",email:"dt@example.com",type:"user"},{id:3,name:"Yang",email:"yz@example.com",type:"user"},{id:4,name:"Yong",email:"ysu@example.com",type:"user"},{id:5,name:"Will",email:"wy@example.com",type:"user"},{id:6,name:"Dave",email:"d@example.com",type:"user"},{id:7,name:"Ke",email:"k@example.com",type:"user"},{id:8,name:"Wenbo",email:"w@example.com",type:"user"},{id:11,name:"Supersupersupersuperreallyreallyreallylongfirstname incrediblyspectacularlylonglastname",email:"Supersupersupersuperreallyreallyreallyincrediblyspectacularlylongemail@example.com",type:"user"}],componentStore=new dist.yh({isOpen:!1,accessLevel:"peopleInYourCompany",permissionLevel:"canView",selectorOptions:[]}),closeModal=()=>{componentStore.set({isOpen:!1})},fakeRequest=()=>(componentStore.set({submitting:!0}),new Promise((resolve=>{setTimeout((()=>{componentStore.set({submitting:!1}),resolve()}),500)}))),isSubstring=(value,searchString)=>value&&-1!==value.toLowerCase().indexOf(searchString.toLowerCase()),getContacts=searchString=>{const filteredContacts=contacts.filter((_ref=>{let{name,email}=_ref;return isSubstring(name,searchString)||isSubstring(email,searchString)}));componentStore.set({selectorOptions:filteredContacts})};return(0,jsx_runtime.jsx)(dist.ZM,{store:componentStore,children:state=>(0,jsx_runtime.jsx)(provider.Z,{locale:"en",children:(0,jsx_runtime.jsxs)("div",{children:[state.isOpen&&(0,jsx_runtime.jsx)(shared_link_modal_SharedLinkModal,{accessLevel:state.accessLevel,accessMenuButtonProps:{"data-resin-target":"changepermissions"},allowedAccessLevels:{peopleWithTheLink:!0,peopleInYourCompany:!0,peopleInThisItem:!0},canRemoveLink:(0,addon_knobs_dist.boolean)("canRemoveLink",!0),changeAccessLevel:newLevel=>fakeRequest().then((()=>componentStore.set({accessLevel:newLevel}))),changePermissionLevel:newLevel=>fakeRequest().then((()=>componentStore.set({permissionLevel:newLevel}))),contacts:state.selectorOptions,copyButtonProps:{"data-resin-target":"copy"},defaultEmailMessage:"I want to share this file with you.\\n\\n-me",emailMessageProps:{"data-resin-target":"message"},expiration:1509173940,getContacts,isOpen:state.isOpen,itemName:"somefile.gif",itemType:"file",isEditAllowed:"canEdit"===state.permissionLevel,isPreviewAllowed:"canView"===state.permissionLevel,onRequestClose:closeModal,onSettingsClick:()=>null,permissionLevel:state.permissionLevel,removeLink:()=>fakeRequest().then(closeModal),removeLinkButtonProps:{"data-resin-target":"remove"},sendEmail:()=>fakeRequest().then((()=>{closeModal()})),sharedLink:"http://box.com/s/abcdefg",submitting:state.submitting}),(0,jsx_runtime.jsx)(Button.Z,{onClick:()=>componentStore.set({isOpen:!0}),children:"Shared Link Modal"})]})})})};basic.displayName="basic";const SharedLinkModal_stories={title:"Features/SharedLinkModal",component:shared_link_modal_SharedLinkModal,parameters:{notes:"`import SharedLinkModal from 'box-ui-elements/es/features/shared-link-modal/SharedLinkModal';`\n"}};basic.parameters=SharedLinkModal_stories_objectSpread({},basic.parameters,{docs:SharedLinkModal_stories_objectSpread({},null===(_basic$parameters=basic.parameters)||void 0===_basic$parameters?void 0:_basic$parameters.docs,{source:SharedLinkModal_stories_objectSpread({originalSource:"() => {\n  const contacts = [{\n    id: 0,\n    name: 'Jackie',\n    email: 'j@example.com',\n    type: 'user'\n  }, {\n    id: 1,\n    name: 'Jeff',\n    email: 'jt@example.com',\n    type: 'user'\n  }, {\n    id: 2,\n    name: 'David',\n    email: 'dt@example.com',\n    type: 'user'\n  }, {\n    id: 3,\n    name: 'Yang',\n    email: 'yz@example.com',\n    type: 'user'\n  }, {\n    id: 4,\n    name: 'Yong',\n    email: 'ysu@example.com',\n    type: 'user'\n  }, {\n    id: 5,\n    name: 'Will',\n    email: 'wy@example.com',\n    type: 'user'\n  }, {\n    id: 6,\n    name: 'Dave',\n    email: 'd@example.com',\n    type: 'user'\n  }, {\n    id: 7,\n    name: 'Ke',\n    email: 'k@example.com',\n    type: 'user'\n  }, {\n    id: 8,\n    name: 'Wenbo',\n    email: 'w@example.com',\n    type: 'user'\n  }, {\n    id: 11,\n    name: 'Supersupersupersuperreallyreallyreallylongfirstname incrediblyspectacularlylonglastname',\n    email: 'Supersupersupersuperreallyreallyreallyincrediblyspectacularlylongemail@example.com',\n    type: 'user'\n  }];\n  const componentStore = new Store({\n    isOpen: false,\n    accessLevel: 'peopleInYourCompany',\n    permissionLevel: 'canView',\n    selectorOptions: []\n  });\n  const closeModal = () => {\n    componentStore.set({\n      isOpen: false\n    });\n  };\n  const fakeRequest = () => {\n    componentStore.set({\n      submitting: true\n    });\n    return new Promise(resolve => {\n      setTimeout(() => {\n        componentStore.set({\n          submitting: false\n        });\n        resolve();\n      }, 500);\n    });\n  };\n  const isSubstring = (value, searchString) => {\n    return value && value.toLowerCase().indexOf(searchString.toLowerCase()) !== -1;\n  };\n  const getContacts = searchString => {\n    const filteredContacts = contacts.filter(({\n      name,\n      email\n    }) => isSubstring(name, searchString) || isSubstring(email, searchString));\n    componentStore.set({\n      selectorOptions: filteredContacts\n    });\n  };\n  return <State store={componentStore}>\n            {state => <IntlProvider locale=\"en\">\n                    <div>\n                        {state.isOpen && <SharedLinkModal accessLevel={state.accessLevel} accessMenuButtonProps={{\n          'data-resin-target': 'changepermissions'\n        }} allowedAccessLevels={{\n          peopleWithTheLink: true,\n          peopleInYourCompany: true,\n          peopleInThisItem: true\n        }} canRemoveLink={boolean('canRemoveLink', true)} changeAccessLevel={newLevel => fakeRequest().then(() => componentStore.set({\n          accessLevel: newLevel\n        }))} changePermissionLevel={newLevel => fakeRequest().then(() => componentStore.set({\n          permissionLevel: newLevel\n        }))} contacts={state.selectorOptions} copyButtonProps={{\n          'data-resin-target': 'copy'\n        }} defaultEmailMessage=\"I want to share this file with you.\\n\\n-me\" emailMessageProps={{\n          'data-resin-target': 'message'\n        }} expiration={1509173940} getContacts={getContacts} isOpen={state.isOpen} itemName=\"somefile.gif\" itemType=\"file\" isEditAllowed={state.permissionLevel === 'canEdit'} isPreviewAllowed={state.permissionLevel === 'canView'} onRequestClose={closeModal} onSettingsClick={() => null} permissionLevel={state.permissionLevel} removeLink={() => fakeRequest().then(closeModal)} removeLinkButtonProps={{\n          'data-resin-target': 'remove'\n        }} sendEmail={() => fakeRequest().then(() => {\n          closeModal();\n        })} sharedLink=\"http://box.com/s/abcdefg\" submitting={state.submitting} />}\n                        <Button onClick={() => componentStore.set({\n          isOpen: true\n        })}>\n                            Shared Link Modal\n                        </Button>\n                    </div>\n                </IntlProvider>}\n        </State>;\n}"},null===(_basic$parameters2=basic.parameters)||void 0===_basic$parameters2||null===(_basic$parameters2$do=_basic$parameters2.docs)||void 0===_basic$parameters2$do?void 0:_basic$parameters2$do.source)})});const __namedExportsOrder=["basic"];basic.__docgenInfo={description:"",methods:[],displayName:"basic"}}}]);