"use strict";(globalThis.webpackChunkbox_ui_elements=globalThis.webpackChunkbox_ui_elements||[]).push([[71377],{"./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/@storybook/addon-styling/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[3]!./src/components/draft-js-editor/DraftJSEditor.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".public-DraftEditorPlaceholder-root{margin:8px 10px;color:#6f6f6f}.bdl-is-disabled .public-DraftStyleDefault-block,.is-disabled .public-DraftStyleDefault-block{width:262px;padding:8px 10px;border:1px solid #d3d3d3;border-radius:4px}.draft-js-editor{overflow:hidden}","",{version:3,sources:["webpack://./src/components/draft-js-editor/DraftJSEditor.scss","webpack://./src/styles/constants/_colors.scss","webpack://./src/styles/constants/_layout.scss"],names:[],mappings:"AAEA,oCACI,eAAA,CACA,aCiBU,CDdd,8FAEI,WAAA,CACA,gBAAA,CACA,wBAAA,CACA,iBEHqB,CFMzB,iBACI,eAAA",sourcesContent:["@import '../../styles/variables';\n\n.public-DraftEditorPlaceholder-root {\n    margin: 8px 10px;\n    color: $bdl-gray-65;\n}\n\n.bdl-is-disabled .public-DraftStyleDefault-block,\n.is-disabled .public-DraftStyleDefault-block {\n    width: 262px;\n    padding: 8px 10px;\n    border: 1px solid $bdl-gray-20;\n    border-radius: $bdl-border-radius-size;\n}\n\n.draft-js-editor {\n    overflow: hidden;\n}\n","// Box Design Language Colors\n// confirm with design before extending\n\n$white: #fff !default;\n$black: #000 !default;\n$countBadgeBackground: #e9163c !default;\n\n// Box/Primary Blues\n$bdl-box-blue: #0061d5 !default;\n$bdl-box-blue-80: #3381dd !default;\n$bdl-box-blue-50: #7fb0ea !default;\n$bdl-box-blue-40: #99c0ee !default;\n$bdl-box-blue-30: #b2cff2 !default;\n$bdl-box-blue-20: #ccdff7 !default;\n$bdl-box-blue-10: #e5effa !default;\n$bdl-box-blue-05: #f2f7fd !default;\n$bdl-box-blue-02: #fafcfe !default;\n\n// Box/Primary Grays\n$bdl-gray: #222 !default;\n$bdl-gray-80: #4e4e4e !default;\n$bdl-gray-65: #6f6f6f !default;\n$bdl-gray-50: #909090 !default;\n$bdl-gray-40: #a7a7a7 !default;\n$bdl-gray-30: #bcbcbc !default;\n$bdl-gray-20: #d3d3d3 !default;\n$bdl-gray-10: #e8e8e8 !default;\n$bdl-gray-05: #f4f4f4 !default;\n$bdl-gray-02: #fbfbfb !default;\n\n// Dark Blues\n$bdl-dark-blue: #003c84 !default;\n$bdl-dark-blue-50: #7f9dc1 !default;\n$bdl-dark-blue-20: #ccd8e6 !default;\n$bdl-dark-blue-10: #e5ebf2 !default;\n$bdl-dark-blue-05: #f2f5f9 !default;\n$bdl-dark-blue-02: #fafbfd !default;\n\n// Light Blues\n$bdl-light-blue: #2486fc !default;\n$bdl-light-blue-50: #91c2fd !default;\n$bdl-light-blue-20: #d3e7fe !default;\n$bdl-light-blue-10: #e9f2fe !default;\n$bdl-light-blue-05: #f4f9ff !default;\n$bdl-light-blue-02: #fbfdff !default;\n\n// Yelloranges\n$bdl-yellorange: #f5b31b !default;\n$bdl-yellorange-50: #fad98d !default;\n$bdl-yellorange-20: #fdf0d1 !default;\n$bdl-yellorange-10: #fef7e8 !default;\n$bdl-yellorange-05: #fefbf3 !default;\n$bdl-yellorange-02: #fffefb !default;\n\n// Yellows\n$bdl-yellow: #ffd700 !default;\n$bdl-yellow-50: #ffeb7f !default;\n$bdl-yellow-20: #fff7cc !default;\n$bdl-yellow-10: #fffbe5 !default;\n$bdl-yellow-05: #fffdf2 !default;\n$bdl-yellow-02: #fffefa !default;\n\n// Green Lights\n$bdl-green-light: #26c281 !default;\n$bdl-green-light-50: #92e0c0 !default;\n$bdl-green-light-20: #d4f3e6 !default;\n$bdl-green-light-10: #e9f8f2 !default;\n$bdl-green-light-05: #f4fcf8 !default;\n$bdl-green-light-02: #fbfefd !default;\n\n// Grimaces\n$bdl-grimace: #4826c2 !default;\n$bdl-grimace-50: #a392e0 !default;\n$bdl-grimace-20: #dad4f3 !default;\n$bdl-grimace-10: #ece9f8 !default;\n$bdl-grimace-05: #f6f4fc !default;\n$bdl-grimace-02: #fbfbfe !default;\n\n// Orange\n$bdl-orange: #f1811a !default;\n$bdl-orange-50: #f8c08c !default;\n$bdl-orange-20: #fce6d1 !default;\n$bdl-orange-10: #fdf2e8 !default;\n$bdl-orange-05: #fef8f3 !default;\n$bdl-orange-02: #fffdfb !default;\n\n// Purple Rains\n$bdl-purple-rain: #9f3fed !default;\n$bdl-purple-rain-50: #cf9ff6 !default;\n$bdl-purple-rain-20: #ecd9fb !default;\n$bdl-purple-rain-10: #f5ebfd !default;\n$bdl-purple-rain-05: #faf5fe !default;\n$bdl-purple-rain-02: #fdfbff !default;\n\n// Watermelon Reds\n$bdl-watermelon-red: #ed3757 !default;\n$bdl-watermelon-red-50: #f69bab !default;\n$bdl-watermelon-red-20: #fbd7dd !default;\n$bdl-watermelon-red-10: #fdebee !default;\n$bdl-watermelon-red-05: #fef5f6 !default;\n$bdl-watermelon-red-02: #fffbfc !default;\n","// Z-Indexes\n$modal-dialog-z-index: 160 !default;\n$menu-z-index: 170 !default;\n$submenu-z-index: 171 !default;\n$overlay-z-index: 190 !default;\n$tooltip-z-index: 190 !default;\n$notifications-wrapper-z-index: 200 !default;\n\n// Borders\n$bdl-border-radius-size: 4px;\n$bdl-border-radius-size-med: $bdl-border-radius-size * 1.5;\n$bdl-border-radius-size-large: $bdl-border-radius-size * 2;\n$bdl-border-radius-size-xlarge: $bdl-border-radius-size * 3;\n\n// Drop shadows\n$bdl-header-box-shadow: 0 0 10px 0 rgba(0, 0, 0, .05);\n\n// Spacing\n$bdl-grid-unit: 4px !default;\n$bdl-grid-unit-px: 4 !default; // unitless grid unit (defined in pixels for manual multiplication in JS)\n\n// Headers\n$bdl-header-height: 64px;\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/@storybook/addon-styling/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[3]!./src/components/form-elements/draft-js-mention-selector/MentionSelector.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_addon_styling_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".mention-selector-wrapper{position:relative;margin:0 0 20px}.mention-selector-wrapper .content-editable-container{margin:0}.mention-selector-wrapper .mention-start-state{position:absolute;z-index:90;width:100%;margin-top:8px;padding:8px;background:#fff;border:1px solid #bcbcbc;border-radius:6px;box-shadow:0 2px 6px 0 rgba(0,0,0,.1)}.mention-selector-wrapper .overlay{margin-top:8px}","",{version:3,sources:["webpack://./src/components/form-elements/draft-js-mention-selector/MentionSelector.scss","webpack://./src/styles/constants/_colors.scss","webpack://./src/styles/constants/_layout.scss"],names:[],mappings:"AAMA,0BACI,iBAAA,CACA,eAAA,CAEA,sDACI,QAAA,CAGJ,+CACI,iBAAA,CACA,UAAA,CACA,UAAA,CACA,cAAA,CACA,WAAA,CACA,eCjBA,CDkBA,wBAAA,CACA,iBEZqB,CFarB,qCAAA,CAMJ,mCACI,cAAA",sourcesContent:["@import '../../../styles/variables';\n\n/**************************************\n * Mention Selector\n **************************************/\n\n.mention-selector-wrapper {\n    position: relative;\n    margin: 0 0 20px;\n\n    .content-editable-container {\n        margin: 0;\n    }\n\n    .mention-start-state {\n        position: absolute;\n        z-index: 90;\n        width: 100%;\n        margin-top: $bdl-grid-unit * 2;\n        padding: $bdl-grid-unit * 2;\n        background: $white;\n        border: 1px solid $bdl-gray-30;\n        border-radius: $bdl-border-radius-size-med;\n        box-shadow: 0 2px 6px 0 fade-out($black, .9);\n    }\n\n    // Normally .bdl-SelectorDropdown > .text-input-container has a bottom margin\n    // but the custom text box (DraftJSEditor) doesn't have one.\n    // Add spacing above dropdown wrapper here instead:\n    .overlay {\n        margin-top: $bdl-grid-unit * 2;\n    }\n}\n","// Box Design Language Colors\n// confirm with design before extending\n\n$white: #fff !default;\n$black: #000 !default;\n$countBadgeBackground: #e9163c !default;\n\n// Box/Primary Blues\n$bdl-box-blue: #0061d5 !default;\n$bdl-box-blue-80: #3381dd !default;\n$bdl-box-blue-50: #7fb0ea !default;\n$bdl-box-blue-40: #99c0ee !default;\n$bdl-box-blue-30: #b2cff2 !default;\n$bdl-box-blue-20: #ccdff7 !default;\n$bdl-box-blue-10: #e5effa !default;\n$bdl-box-blue-05: #f2f7fd !default;\n$bdl-box-blue-02: #fafcfe !default;\n\n// Box/Primary Grays\n$bdl-gray: #222 !default;\n$bdl-gray-80: #4e4e4e !default;\n$bdl-gray-65: #6f6f6f !default;\n$bdl-gray-50: #909090 !default;\n$bdl-gray-40: #a7a7a7 !default;\n$bdl-gray-30: #bcbcbc !default;\n$bdl-gray-20: #d3d3d3 !default;\n$bdl-gray-10: #e8e8e8 !default;\n$bdl-gray-05: #f4f4f4 !default;\n$bdl-gray-02: #fbfbfb !default;\n\n// Dark Blues\n$bdl-dark-blue: #003c84 !default;\n$bdl-dark-blue-50: #7f9dc1 !default;\n$bdl-dark-blue-20: #ccd8e6 !default;\n$bdl-dark-blue-10: #e5ebf2 !default;\n$bdl-dark-blue-05: #f2f5f9 !default;\n$bdl-dark-blue-02: #fafbfd !default;\n\n// Light Blues\n$bdl-light-blue: #2486fc !default;\n$bdl-light-blue-50: #91c2fd !default;\n$bdl-light-blue-20: #d3e7fe !default;\n$bdl-light-blue-10: #e9f2fe !default;\n$bdl-light-blue-05: #f4f9ff !default;\n$bdl-light-blue-02: #fbfdff !default;\n\n// Yelloranges\n$bdl-yellorange: #f5b31b !default;\n$bdl-yellorange-50: #fad98d !default;\n$bdl-yellorange-20: #fdf0d1 !default;\n$bdl-yellorange-10: #fef7e8 !default;\n$bdl-yellorange-05: #fefbf3 !default;\n$bdl-yellorange-02: #fffefb !default;\n\n// Yellows\n$bdl-yellow: #ffd700 !default;\n$bdl-yellow-50: #ffeb7f !default;\n$bdl-yellow-20: #fff7cc !default;\n$bdl-yellow-10: #fffbe5 !default;\n$bdl-yellow-05: #fffdf2 !default;\n$bdl-yellow-02: #fffefa !default;\n\n// Green Lights\n$bdl-green-light: #26c281 !default;\n$bdl-green-light-50: #92e0c0 !default;\n$bdl-green-light-20: #d4f3e6 !default;\n$bdl-green-light-10: #e9f8f2 !default;\n$bdl-green-light-05: #f4fcf8 !default;\n$bdl-green-light-02: #fbfefd !default;\n\n// Grimaces\n$bdl-grimace: #4826c2 !default;\n$bdl-grimace-50: #a392e0 !default;\n$bdl-grimace-20: #dad4f3 !default;\n$bdl-grimace-10: #ece9f8 !default;\n$bdl-grimace-05: #f6f4fc !default;\n$bdl-grimace-02: #fbfbfe !default;\n\n// Orange\n$bdl-orange: #f1811a !default;\n$bdl-orange-50: #f8c08c !default;\n$bdl-orange-20: #fce6d1 !default;\n$bdl-orange-10: #fdf2e8 !default;\n$bdl-orange-05: #fef8f3 !default;\n$bdl-orange-02: #fffdfb !default;\n\n// Purple Rains\n$bdl-purple-rain: #9f3fed !default;\n$bdl-purple-rain-50: #cf9ff6 !default;\n$bdl-purple-rain-20: #ecd9fb !default;\n$bdl-purple-rain-10: #f5ebfd !default;\n$bdl-purple-rain-05: #faf5fe !default;\n$bdl-purple-rain-02: #fdfbff !default;\n\n// Watermelon Reds\n$bdl-watermelon-red: #ed3757 !default;\n$bdl-watermelon-red-50: #f69bab !default;\n$bdl-watermelon-red-20: #fbd7dd !default;\n$bdl-watermelon-red-10: #fdebee !default;\n$bdl-watermelon-red-05: #fef5f6 !default;\n$bdl-watermelon-red-02: #fffbfc !default;\n","// Z-Indexes\n$modal-dialog-z-index: 160 !default;\n$menu-z-index: 170 !default;\n$submenu-z-index: 171 !default;\n$overlay-z-index: 190 !default;\n$tooltip-z-index: 190 !default;\n$notifications-wrapper-z-index: 200 !default;\n\n// Borders\n$bdl-border-radius-size: 4px;\n$bdl-border-radius-size-med: $bdl-border-radius-size * 1.5;\n$bdl-border-radius-size-large: $bdl-border-radius-size * 2;\n$bdl-border-radius-size-xlarge: $bdl-border-radius-size * 3;\n\n// Drop shadows\n$bdl-header-box-shadow: 0 0 10px 0 rgba(0, 0, 0, .05);\n\n// Spacing\n$bdl-grid-unit: 4px !default;\n$bdl-grid-unit-px: 4 !default; // unitless grid unit (defined in pixels for manual multiplication in JS)\n\n// Headers\n$bdl-header-height: 64px;\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/draft-js-editor/DraftJSEditor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>components_draft_js_editor_DraftJSEditor});var react=__webpack_require__("./node_modules/react/index.js"),message=__webpack_require__("./node_modules/react-intl/lib/src/components/message.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),uniqueId=__webpack_require__("./node_modules/lodash/uniqueId.js"),uniqueId_default=__webpack_require__.n(uniqueId),Draft=__webpack_require__("./node_modules/draft-js/lib/Draft.js"),tooltip=(__webpack_require__("./node_modules/draft-js/dist/Draft.css"),__webpack_require__("./src/components/tooltip/index.ts")),messages=__webpack_require__("./src/common/messages.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),DraftJSEditor=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/@storybook/addon-styling/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[3]!./src/components/draft-js-editor/DraftJSEditor.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(DraftJSEditor.Z,options);DraftJSEditor.Z&&DraftJSEditor.Z.locals&&DraftJSEditor.Z.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const OptionalFormattedMessage=()=>(0,jsx_runtime.jsxs)("span",{className:"bdl-Label-optional",children:["(",(0,jsx_runtime.jsx)(message.Z,_objectSpread({},messages.Z.optional)),")"]});OptionalFormattedMessage.displayName="OptionalFormattedMessage";class DraftJSEditor_DraftJSEditor extends react.Component{constructor(){super(...arguments),_defineProperty(this,"handleChange",(editorState=>{const{onChange}=this.props;onChange(editorState)})),_defineProperty(this,"handleBlur",(editorState=>{const{onBlur}=this.props;onBlur(editorState)})),_defineProperty(this,"handleReturn",(event=>{const{onReturn,inputProps}=this.props;return onReturn&&!inputProps["aria-activedescendant"]&&onReturn(event)?"handled":"not-handled"})),_defineProperty(this,"labelID",uniqueId_default()("label")),_defineProperty(this,"descriptionID",uniqueId_default()("description"))}render(){const{editorState,error,hideLabel,inputProps,isDisabled,isRequired,label,description,onFocus,placeholder}=this.props,{handleBlur,handleChange}=this,classes=classnames_default()({"draft-js-editor":!0,"is-disabled bdl-is-disabled":isDisabled,"show-error":!!error});let a11yProps={};return inputProps.role&&(a11yProps={ariaActiveDescendantID:inputProps["aria-activedescendant"],ariaAutoComplete:inputProps["aria-autocomplete"],ariaExpanded:inputProps["aria-expanded"],ariaOwneeID:inputProps["aria-owns"],ariaMultiline:!0,role:"textbox"}),(0,jsx_runtime.jsxs)("div",{className:classes,children:[(0,jsx_runtime.jsxs)("span",{className:classnames_default()("bdl-Label",{"accessibility-hidden":hideLabel}),id:this.labelID,children:[label,!isRequired&&(0,jsx_runtime.jsx)(OptionalFormattedMessage,{})]}),(0,jsx_runtime.jsx)("span",{className:"accessibility-hidden screenreader-description",id:this.descriptionID,children:description}),(0,jsx_runtime.jsx)(tooltip.ZP,{isShown:!!error,position:"bottom-left",text:error?error.message:"",theme:"error",children:(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Draft.Editor,_objectSpread({},a11yProps,{ariaLabelledBy:this.labelID,ariaDescribedBy:this.descriptionID,editorState,handleReturn:this.handleReturn,onBlur:handleBlur,onChange:handleChange,onFocus,placeholder,readOnly:isDisabled,stripPastedStyles:!0}))})})]})}}DraftJSEditor_DraftJSEditor.displayName="DraftJSEditor",_defineProperty(DraftJSEditor_DraftJSEditor,"defaultProps",{inputProps:{},isRequired:!1,isFocused:!1}),DraftJSEditor_DraftJSEditor.__docgenInfo={description:"",methods:[{name:"handleChange",docblock:"Calls onChange handler passed in\n@param {EditorState} editorState The new/updated editor state\n@returns {void}",modifiers:[],params:[{name:"editorState",description:"The new/updated editor state",type:{name:"EditorState",alias:"EditorState"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Calls onChange handler passed in"},{name:"handleBlur",docblock:null,modifiers:[],params:[{name:"editorState",type:{name:"EditorState",alias:"EditorState"}}],returns:null},{name:"handleReturn",docblock:"Event handler which being passed to 'handleReturn' prop of DraftJSEditor\nThis gives consumer the ability to handle return key event before DraftJSEditor handles it.\n@param {SyntheticKeyboardEvent} event\n@returns {string}",modifiers:[],params:[{name:"event",description:null,type:{name:"SyntheticKeyboardEvent",elements:[],raw:"SyntheticKeyboardEvent<>",alias:"SyntheticKeyboardEvent"},optional:!1}],returns:{description:null,type:{name:"string"}},description:"Event handler which being passed to 'handleReturn' prop of DraftJSEditor\nThis gives consumer the ability to handle return key event before DraftJSEditor handles it."}],displayName:"DraftJSEditor",props:{inputProps:{defaultValue:{value:"{}",computed:!1},required:!1,flowType:{name:"Object"},description:""},isRequired:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},isFocused:{defaultValue:{value:"false",computed:!1},required:!1},description:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},editorState:{required:!0,flowType:{name:"EditorState"},description:""},error:{required:!1,flowType:{name:"Object",nullable:!0},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},onBlur:{required:!0,flowType:{name:"Function"},description:""},onChange:{required:!0,flowType:{name:"Function"},description:""},onFocus:{required:!0,flowType:{name:"Function"},description:""},onReturn:{required:!1,flowType:{name:"Function"},description:""},placeholder:{required:!1,flowType:{name:"string"},description:""}}};const components_draft_js_editor_DraftJSEditor=DraftJSEditor_DraftJSEditor},"./src/components/form-elements/draft-js-mention-selector/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{qA:()=>draft_js_mention_selector_DraftMentionDecorator,Gj:()=>draft_js_mention_selector_createMentionSelectorState,ZP:()=>draft_js_mention_selector_DraftJSMentionSelector,vi:()=>getFormattedCommentText});var Draft=__webpack_require__("./node_modules/draft-js/lib/Draft.js");const defaultMentionTriggers=["@","＠","﹫"],defaultMentionTriggersString=defaultMentionTriggers.reduce(((prev,current)=>"".concat(prev,"\\").concat(current)),""),defaultMentionPattern=new RegExp("([".concat(defaultMentionTriggersString,"])([^").concat(defaultMentionTriggersString,"]*)$"));function getFormattedCommentText(editorState){const contentState=editorState.getCurrentContent(),blockMap=contentState.getBlockMap(),resultStringArr=[];let hasMention=!1;return blockMap.forEach((block=>{const text=block.getText(),blockMapStringArr=[];block.findEntityRanges((()=>!0),((start,end)=>{const entityKey=block.getEntityAt(start);if(entityKey){const entity=contentState.getEntity(entityKey),stringToAdd="@[".concat(entity.getData().id,":").concat(text.substring(start+1,end),"]");blockMapStringArr.push(stringToAdd),hasMention=!0}else blockMapStringArr.push(text.substring(start,end))})),resultStringArr.push(blockMapStringArr.join(""))})),{text:resultStringArr.join("\n"),hasMention}}var react=__webpack_require__("./node_modules/react/index.js"),noop=__webpack_require__("./node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop),message=__webpack_require__("./node_modules/react-intl/lib/src/components/message.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),datalist_item=__webpack_require__("./src/components/datalist-item/index.ts"),DraftJSEditor=__webpack_require__("./src/components/draft-js-editor/DraftJSEditor.js"),selector_dropdown=__webpack_require__("./src/components/selector-dropdown/index.js");const draft_js_mention_selector_messages=(0,__webpack_require__("./node_modules/react-intl/lib/index.js").vU)({startMention:{id:"boxui.draftjs.mentionSelector.startMention",defaultMessage:"Mention someone to notify them"},noUsersFound:{id:"boxui.draftjs.mentionSelector.noUsersFound",defaultMessage:"No users found"},usersFound:{id:"boxui.draftjs.mentionSelector.usersFound",defaultMessage:"{usersCount, plural, one {one user found} other {{usersCount} users found}}"}});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),MentionSelector=__webpack_require__("./node_modules/@storybook/addon-styling/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/@storybook/addon-styling/node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[3]!./src/components/form-elements/draft-js-mention-selector/MentionSelector.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(MentionSelector.Z,options);MentionSelector.Z&&MentionSelector.Z.locals&&MentionSelector.Z.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}const DefaultSelectorRow=_ref=>{let{item={}}=_ref,rest=_objectWithoutProperties(_ref,["item"]);return(0,jsx_runtime.jsxs)(datalist_item.Z,_objectSpread({},rest,{children:[item.name," ",(0,jsx_runtime.jsx)("span",{className:"dropdown-secondary-text",children:item.email})]}))};DefaultSelectorRow.displayName="DefaultSelectorRow";const DefaultStartMentionMessage=()=>(0,jsx_runtime.jsx)(message.Z,_objectSpread({},draft_js_mention_selector_messages.startMention));DefaultStartMentionMessage.displayName="DefaultStartMentionMessage";const MentionStartState=_ref2=>{let{message}=_ref2;return(0,jsx_runtime.jsx)("div",{role:"alert",className:"mention-start-state",children:message})};MentionStartState.displayName="MentionStartState";class DraftJSMentionSelector extends react.Component{constructor(props){super(props),_defineProperty(this,"handleMention",(()=>{const{onMention}=this.props,{activeMention}=this.state;onMention&&onMention(activeMention?activeMention.mentionString:"")})),_defineProperty(this,"handleContactSelected",(index=>{const{contacts}=this.props;this.addMention(contacts[index]),this.setState({activeMention:null,isFocused:!0},(()=>{this.handleMention()}))})),_defineProperty(this,"handleBlur",(event=>{const{onBlur}=this.props;this.setState({isFocused:!1}),onBlur&&onBlur(event)})),_defineProperty(this,"handleFocus",(event=>{const{onFocus}=this.props;this.setState({isFocused:!0}),onFocus&&onFocus(event)})),_defineProperty(this,"handleChange",(nextEditorState=>{const{onChange}=this.props,activeMention=this.getActiveMentionForEditorState(nextEditorState);this.setState({activeMention},(()=>{onChange&&onChange(nextEditorState),activeMention&&activeMention.mentionString&&this.handleMention()}))})),_defineProperty(this,"shouldDisplayMentionLookup",(()=>{const{contacts}=this.props,{activeMention}=this.state;return!!(activeMention&&activeMention.mentionString&&contacts.length)}));const mentionTriggers=props.mentionTriggers.reduce(((prev,current)=>"".concat(prev,"\\").concat(current)),"");this.state={activeMention:null,isFocused:!1,mentionPattern:new RegExp("([".concat(mentionTriggers,"])([^").concat(mentionTriggers,"]*)$"))}}componentDidUpdate(prevProps){const{contacts:prevContacts}=prevProps,{contacts:currentContacts}=this.props,{activeMention}=this.state;null===activeMention||currentContacts.length||prevContacts.length===currentContacts.length||this.setState({activeMention:null})}getActiveMentionForEditorState(editorState){const{mentionPattern}=this.state;return function getActiveMentionForEditorState(editorState){let mentionPattern=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultMentionPattern;const contentState=editorState.getCurrentContent(),selectionState=editorState.getSelection(),startKey=selectionState.getStartKey(),activeBlock=contentState.getBlockForKey(startKey),cursorPosition=selectionState.getStartOffset();let result=null;return activeBlock.findEntityRanges((character=>null===character.getEntity()),((start,end)=>{if(start<=cursorPosition&&cursorPosition<=end){const mentionMatch=activeBlock.getText().substr(start,cursorPosition-start).match(mentionPattern);mentionMatch&&(result={blockID:startKey,mentionString:mentionMatch[2],mentionTrigger:mentionMatch[1],start:start+mentionMatch.index,end:cursorPosition})}return null})),result}(editorState,mentionPattern)}addMention(mention){const{activeMention}=this.state,{editorState}=this.props,editorStateWithLink=function addMention(editorState,activeMention,mention){const{start,end}=activeMention||{},{id,name}=mention,contentState=editorState.getCurrentContent(),preInsertionSelectionState=editorState.getSelection().merge({anchorOffset:start,focusOffset:end}),textToInsert="@".concat(name),entityKey=contentState.createEntity("MENTION","IMMUTABLE",{id}).getLastCreatedEntityKey(),contentStateWithLink=Draft.Modifier.replaceText(contentState,preInsertionSelectionState,textToInsert,null,entityKey),spaceOffset=preInsertionSelectionState.getStartOffset()+textToInsert.length,selectionStateForAddingSpace=preInsertionSelectionState.merge({anchorOffset:spaceOffset,focusOffset:spaceOffset}),contentStateWithLinkAndExtraSpace=Draft.Modifier.insertText(contentStateWithLink,selectionStateForAddingSpace," ");return Draft.EditorState.push(editorState,contentStateWithLinkAndExtraSpace,"change-block-type")}(editorState,activeMention,mention);this.setState({activeMention:null},(()=>{this.handleChange(editorStateWithLink)}))}render(){const{className,contacts,contactsLoaded,editorState,error,hideLabel,isDisabled,isRequired,label,description,onReturn,placeholder,selectorRow,startMentionMessage,onMention}=this.props,{activeMention,isFocused}=this.state,classes=classnames_default()("mention-selector-wrapper",className),showMentionStartState=!(!onMention||!activeMention||activeMention.mentionString||!isFocused),usersFoundMessage=this.shouldDisplayMentionLookup()?_objectSpread({},draft_js_mention_selector_messages.usersFound,{values:{usersCount:contacts.length}}):draft_js_mention_selector_messages.noUsersFound;return(0,jsx_runtime.jsxs)("div",{className:classes,children:[(0,jsx_runtime.jsx)(selector_dropdown.Z,{onSelect:this.handleContactSelected,selector:(0,jsx_runtime.jsx)(DraftJSEditor.Z,{editorState,error,hideLabel,isDisabled,isFocused,isRequired,label,description,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,onReturn,placeholder}),children:this.shouldDisplayMentionLookup()?contacts.map((contact=>react.cloneElement(selectorRow,_objectSpread({},selectorRow.props,{},contact,{key:contact.id})))):[]}),showMentionStartState?(0,jsx_runtime.jsx)(MentionStartState,{message:startMentionMessage}):null,contactsLoaded&&(0,jsx_runtime.jsx)("span",{className:"accessibility-hidden","data-testid":"accessibility-alert",role:"alert",children:(0,jsx_runtime.jsx)(message.Z,_objectSpread({},usersFoundMessage))})]})}}DraftJSMentionSelector.displayName="DraftJSMentionSelector",_defineProperty(DraftJSMentionSelector,"defaultProps",{className:"",contacts:[],isDisabled:!1,isRequired:!1,mentionTriggers:defaultMentionTriggers,selectorRow:(0,jsx_runtime.jsx)(DefaultSelectorRow,{}),startMentionMessage:(0,jsx_runtime.jsx)(DefaultStartMentionMessage,{})}),DraftJSMentionSelector.__docgenInfo={description:"",methods:[{name:"getActiveMentionForEditorState",docblock:"Extracts the active mention from the editor state\n\n@param {EditorState} editorState\n@returns {object}",modifiers:[],params:[{name:"editorState",description:null,type:{name:"EditorState",alias:"EditorState"},optional:!1}],returns:{description:null,type:{name:"object"}},description:"Extracts the active mention from the editor state"},{name:"handleMention",docblock:"Called on each keypress when a mention is being composed\n@returns {void}",modifiers:[],params:[],returns:{description:null,type:{name:"void"}},description:"Called on each keypress when a mention is being composed"},{name:"handleContactSelected",docblock:"Method that gets called when a mention contact is selected\n@param {number} index The selected index\n@returns {void}",modifiers:[],params:[{name:"index",description:"The selected index",type:{name:"number"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Method that gets called when a mention contact is selected"},{name:"handleBlur",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"handleFocus",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"handleChange",docblock:"Event handler called when DraftJSEditor emits onChange\nChecks current text to see if any mentions were made\n@param {EditorState} editorState The new editor state\n@returns {void}",modifiers:[],params:[{name:"nextEditorState",type:{name:"EditorState",alias:"EditorState"}}],returns:{description:null,type:{name:"void"}},description:"Event handler called when DraftJSEditor emits onChange\nChecks current text to see if any mentions were made"},{name:"addMention",docblock:"Inserts a selected mention into the editor\n@param {object} mention The selected mention to insert",modifiers:[],params:[{name:"mention",description:"The selected mention to insert",type:{name:"Object",alias:"Object"},optional:!1}],returns:null,description:"Inserts a selected mention into the editor"},{name:"shouldDisplayMentionLookup",docblock:"@returns {boolean}",modifiers:[],params:[],returns:{description:null,type:{name:"boolean"}},description:null}],displayName:"DraftJSMentionSelector",props:{className:{defaultValue:{value:"''",computed:!1},required:!1,flowType:{name:"string"},description:""},contacts:{defaultValue:{value:"[]",computed:!1},required:!1,flowType:{name:"SelectorItems",elements:[],raw:"SelectorItems<>"},description:""},isDisabled:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},isRequired:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},mentionTriggers:{defaultValue:{value:"defaultMentionTriggers",computed:!0},required:!1,flowType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:""},selectorRow:{defaultValue:{value:"<DefaultSelectorRow />",computed:!1},required:!1,flowType:{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]},description:""},startMentionMessage:{defaultValue:{value:"<DefaultStartMentionMessage />",computed:!1},required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},contactsLoaded:{required:!1,flowType:{name:"boolean"},description:""},description:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},editorState:{required:!0,flowType:{name:"EditorState"},description:""},error:{required:!1,flowType:{name:"Object",nullable:!0},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},onBlur:{required:!1,flowType:{name:"Function"},description:""},onChange:{required:!1,flowType:{name:"Function"},description:""},onFocus:{required:!1,flowType:{name:"Function"},description:""},onMention:{required:!1,flowType:{name:"Function"},description:""},onReturn:{required:!1,flowType:{name:"Function"},description:""},placeholder:{required:!1,flowType:{name:"string"},description:""}}};const DraftJSMentionSelectorCore=DraftJSMentionSelector,DraftMentionItem=_ref=>{let{contentState,entityKey,children}=_ref,id="";return entityKey&&(id=contentState.getEntity(entityKey).getData().id),(0,jsx_runtime.jsx)("a",{href:"/profile/".concat(id),children})};DraftMentionItem.displayName="DraftMentionItem",DraftMentionItem.__docgenInfo={description:"",methods:[],displayName:"DraftMentionItem",props:{children:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},contentState:{required:!0,flowType:{name:"ContentState"},description:""},decoratedText:{required:!0,flowType:{name:"string"},description:""},entityKey:{required:!1,flowType:{name:"string"},description:""}}};const draft_js_mention_selector_DraftMentionItem=DraftMentionItem;var FormInput=__webpack_require__("./src/components/form-elements/form/FormInput.js"),input_messages=__webpack_require__("./src/components/form-elements/input-messages.js");function DraftJSMentionSelector_defineProperty(obj,key,value){return(key=function DraftJSMentionSelector_toPropertyKey(t){var i=function DraftJSMentionSelector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const mentionStrategy=(contentBlock,callback,contentState)=>{contentBlock.findEntityRanges((character=>{const entityKey=character.getEntity();return null!==entityKey&&"MENTION"===contentState.getEntity(entityKey).getType()}),callback)};class DraftJSMentionSelector_DraftJSMentionSelector extends react.Component{constructor(props){super(props),DraftJSMentionSelector_defineProperty(this,"handleBlur",(event=>{this.props.validateOnBlur&&this.containerEl&&event.relatedTarget instanceof Node&&!this.containerEl.contains(event.relatedTarget)&&this.checkValidity()})),DraftJSMentionSelector_defineProperty(this,"handleFocus",(event=>{const{onFocus}=this.props;onFocus&&onFocus(event)})),DraftJSMentionSelector_defineProperty(this,"handleChange",(nextEditorState=>{const{internalEditorState}=this.state,{onChange}=this.props;onChange(nextEditorState),internalEditorState&&this.setState({internalEditorState:nextEditorState})})),DraftJSMentionSelector_defineProperty(this,"handleValidityStateUpdateHandler",(()=>{const{isTouched}=this.state;if(!isTouched)return;const error=this.getErrorFromValidityState();this.setState({error})})),DraftJSMentionSelector_defineProperty(this,"checkValidity",(()=>{this.handleValidityStateUpdateHandler()}));const mentionDecorator=new Draft.CompositeDecorator([{strategy:mentionStrategy,component:draft_js_mention_selector_DraftMentionItem}]);this.state={contacts:[],isTouched:!1,internalEditorState:props.editorState?null:Draft.EditorState.createEmpty(mentionDecorator),error:null}}static getDerivedStateFromProps(nextProps){const{contacts}=nextProps;return contacts?{contacts}:null}componentDidUpdate(prevProps,prevState){const{internalEditorState:prevInternalEditorState}=prevState,{internalEditorState}=this.state,{editorState:prevEditorStateFromProps}=prevProps,{editorState}=this.props,prevEditorState=prevInternalEditorState||prevEditorStateFromProps,currentEditorState=internalEditorState||editorState;if(prevEditorState&&currentEditorState&&prevEditorState!==currentEditorState){const newState=this.getDerivedStateFromEditorState(currentEditorState,prevEditorState);newState?this.setState(newState,this.checkValidityIfAllowed):this.checkValidityIfAllowed()}}getDerivedStateFromEditorState(currentEditorState,previousEditorState){const isPreviousEditorStateEmpty=this.isEditorStateEmpty(previousEditorState),isCurrentEditorStateEmpty=this.isEditorStateEmpty(currentEditorState);let newState=null;return isCurrentEditorStateEmpty&&!isPreviousEditorStateEmpty?newState={isTouched:!1,error:null}:isPreviousEditorStateEmpty&&!isCurrentEditorStateEmpty&&(newState={isTouched:!0}),newState}checkValidityIfAllowed(){const{validateOnBlur}=this.props;validateOnBlur||this.checkValidity()}isEditorStateEmpty(editorState){const text=editorState.getCurrentContent().getPlainText().trim(),lastChangeType=editorState.getLastChangeType();return 0===text.length&&null===lastChangeType}getErrorFromValidityState(){const{editorState:externalEditorState,isRequired,maxLength,minLength}=this.props,{internalEditorState}=this.state,editorState=internalEditorState||externalEditorState,{length}=editorState.getCurrentContent().getPlainText().trim();return isRequired&&!length?input_messages.g5():void 0!==minLength&&length<minLength?input_messages.mU(minLength):void 0!==maxLength&&length>maxLength?input_messages.m1(maxLength):null}render(){const{className="",contactsLoaded,editorState:externalEditorState,hideLabel,isDisabled,isRequired,label,description,mentionTriggers,name,onMention,placeholder,selectorRow,startMentionMessage,onReturn}=this.props,{contacts,internalEditorState,error}=this.state,{handleBlur,handleChange,handleFocus}=this,editorState=internalEditorState||externalEditorState;return(0,jsx_runtime.jsx)("div",{ref:containerEl=>{this.containerEl=containerEl},className,children:(0,jsx_runtime.jsx)(FormInput.Z,{name,onValidityStateUpdate:this.handleValidityStateUpdateHandler,children:(0,jsx_runtime.jsx)(DraftJSMentionSelectorCore,{contacts,contactsLoaded,editorState,error,hideLabel,isDisabled,isRequired,label,description,mentionTriggers,onBlur:handleBlur,onChange:handleChange,onFocus:handleFocus,onMention,onReturn,placeholder,selectorRow,startMentionMessage})})})}}DraftJSMentionSelector_DraftJSMentionSelector.displayName="DraftJSMentionSelector",DraftJSMentionSelector_defineProperty(DraftJSMentionSelector_DraftJSMentionSelector,"defaultProps",{isRequired:!1,onChange:noop_default(),validateOnBlur:!0}),DraftJSMentionSelector_DraftJSMentionSelector.__docgenInfo={description:"",methods:[{name:"getDerivedStateFromEditorState",docblock:null,modifiers:[],params:[{name:"currentEditorState",type:{name:"EditorState",alias:"EditorState"}},{name:"previousEditorState",type:{name:"EditorState",alias:"EditorState"}}],returns:null},{name:"checkValidityIfAllowed",docblock:null,modifiers:[],params:[],returns:null},{name:"isEditorStateEmpty",docblock:null,modifiers:[],params:[{name:"editorState",type:{name:"EditorState",alias:"EditorState"}}],returns:{type:{name:"boolean"}}},{name:"getErrorFromValidityState",docblock:"@returns {string}",modifiers:[],params:[],returns:{description:null,type:{name:"string"}},description:null},{name:"handleBlur",docblock:"Event handler called on blur. Triggers validation\n@param {SyntheticFocusEvent} event The event object\n@returns {void}",modifiers:[],params:[{name:"event",description:"The event object",type:{name:"SyntheticFocusEvent",elements:[],raw:"SyntheticFocusEvent<>",alias:"SyntheticFocusEvent"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Event handler called on blur. Triggers validation"},{name:"handleFocus",docblock:null,modifiers:[],params:[{name:"event",type:{name:"SyntheticEvent",elements:[],raw:"SyntheticEvent<>",alias:"SyntheticEvent"}}],returns:null},{name:"handleChange",docblock:"Updates editorState, rechecks validity\n@param {EditorState} nextEditorState The new editor state to set in the state\n@returns {void}",modifiers:[],params:[{name:"nextEditorState",description:"The new editor state to set in the state",type:{name:"EditorState",alias:"EditorState"},optional:!1}],returns:{description:null,type:{name:"void"}},description:"Updates editorState, rechecks validity"},{name:"handleValidityStateUpdateHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"checkValidity",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DraftJSMentionSelector",props:{isRequired:{defaultValue:{value:"false",computed:!1},required:!1,flowType:{name:"boolean"},description:""},onChange:{defaultValue:{value:"noop",computed:!0},required:!1,flowType:{name:"Function"},description:""},validateOnBlur:{defaultValue:{value:"true",computed:!1},required:!1,flowType:{name:"boolean"},description:""},className:{required:!1,flowType:{name:"string"},description:""},contacts:{required:!0,flowType:{name:"SelectorItems",elements:[],raw:"SelectorItems<>"},description:""},contactsLoaded:{required:!1,flowType:{name:"boolean"},description:""},description:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""},editorState:{required:!1,flowType:{name:"EditorState"},description:""},hideLabel:{required:!1,flowType:{name:"boolean"},description:""},isDisabled:{required:!1,flowType:{name:"boolean"},description:""},label:{required:!0,flowType:{name:"ReactNode",raw:"React.Node"},description:""},maxLength:{required:!1,flowType:{name:"number"},description:""},mentionTriggers:{required:!1,flowType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:""},minLength:{required:!1,flowType:{name:"number"},description:""},name:{required:!0,flowType:{name:"string"},description:""},onFocus:{required:!1,flowType:{name:"Function"},description:""},onMention:{required:!1,flowType:{name:"Function"},description:""},onReturn:{required:!1,flowType:{name:"Function"},description:""},placeholder:{required:!1,flowType:{name:"string"},description:""},selectorRow:{required:!1,flowType:{name:"ReactElement",raw:"React.Element<any>",elements:[{name:"any"}]},description:""},startMentionMessage:{required:!1,flowType:{name:"ReactNode",raw:"React.Node"},description:""}}};const draft_js_mention_selector_DraftJSMentionSelector=DraftJSMentionSelector_DraftJSMentionSelector,draft_js_mention_selector_DraftMentionDecorator=new Draft.CompositeDecorator([{strategy:(contentBlock,callback,contentState)=>{contentBlock.findEntityRanges((character=>{const entityKey=character.getEntity();return null!==entityKey&&"MENTION"===contentState.getEntity(entityKey).getType()}),callback)},component:draft_js_mention_selector_DraftMentionItem}]),getMentionFromText=text=>{const matchArray=/([@＠﹫])\[([0-9]+):([^\]]+)]/gi.exec(text);if(!matchArray)return null;const[fullMatch,triggerSymbol,id,name]=matchArray,start=matchArray.index;return{start,end:start+fullMatch.length,data:{id,name,content:"".concat(triggerSymbol).concat(name)}}},draft_js_mention_selector_createMentionSelectorState=function createMentionSelectorState(){let message=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",contentState=Draft.ContentState.createFromText(message),contentBlock=contentState.getFirstBlock();for(;null!=contentBlock;){const text=contentBlock.getText(),mention=text?getMentionFromText(text):null;if(null==mention)contentBlock=contentState.getBlockAfter(contentBlock.getKey());else{const{data,start,end}=mention;contentState.createEntity("MENTION","IMMUTABLE",data);const mentionEntityKey=contentState.getLastCreatedEntityKey(),mentionRange=Draft.SelectionState.createEmpty(contentBlock.getKey()).merge({anchorOffset:start,focusOffset:end});contentState=Draft.Modifier.replaceText(contentState,mentionRange,data.content,null,mentionEntityKey),contentBlock=contentState.getBlockForKey(contentBlock.getKey())}}return Draft.EditorState.createWithContent(contentState,draft_js_mention_selector_DraftMentionDecorator)}},"./src/components/form-elements/form/FormInput.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class FormInput extends react__WEBPACK_IMPORTED_MODULE_1__.Component{componentDidMount(){const{name,onValidityStateUpdate}=this.props;this.context.form&&this.context.form.registerInput(name,onValidityStateUpdate)}componentWillUnmount(){this.context.form&&this.context.form.unregisterInput(this.props.name)}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:this.props.children})}}FormInput.displayName="FormInput",_defineProperty(FormInput,"propTypes",{children:prop_types__WEBPACK_IMPORTED_MODULE_0___default().node.isRequired,onValidityStateUpdate:prop_types__WEBPACK_IMPORTED_MODULE_0___default().func.isRequired,name:prop_types__WEBPACK_IMPORTED_MODULE_0___default().string.isRequired}),_defineProperty(FormInput,"contextTypes",{form:prop_types__WEBPACK_IMPORTED_MODULE_0___default().shape({registerInput:prop_types__WEBPACK_IMPORTED_MODULE_0___default().func.isRequired,unregisterInput:prop_types__WEBPACK_IMPORTED_MODULE_0___default().func.isRequired})}),FormInput.__docgenInfo={description:"",methods:[],displayName:"FormInput",props:{children:{type:{name:"node"},required:!0,description:""},onValidityStateUpdate:{type:{name:"func"},required:!0,description:"callback called when Form pushed down a new validityState, useful for displaying server validation errors"},name:{type:{name:"string"},required:!0,description:"Input name"}},context:{form:{type:{name:"shape",value:{registerInput:{name:"func",required:!0},unregisterInput:{name:"func",required:!0}}},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=FormInput},"./src/components/form-elements/input-messages.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Or:()=>badInput,e1:()=>typeMismatchUrl,g5:()=>valueMissing,m1:()=>tooLong,mU:()=>tooShort,md:()=>typeMismatchEmail,n:()=>patternMismatch});__webpack_require__("./node_modules/react/index.js");var react_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-intl/lib/src/components/message.js"),_common_messages__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/common/messages.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const badInput=()=>({code:"badInput",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.invalidInputError))}),patternMismatch=()=>({code:"patternMismatch",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.invalidInputError))}),tooShort=minLength=>({code:"tooShort",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.minLengthError,{values:{min:minLength}}))}),tooLong=maxLength=>({code:"tooLong",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.maxLengthError,{values:{max:maxLength}}))}),typeMismatchEmail=()=>({code:"typeMismatch",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.invalidEmailError))}),typeMismatchUrl=()=>({code:"typeMismatch",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.invalidURLError))}),valueMissing=()=>({code:"valueMissing",message:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_intl__WEBPACK_IMPORTED_MODULE_3__.Z,_objectSpread({},_common_messages__WEBPACK_IMPORTED_MODULE_1__.Z.requiredFieldError))})}}]);